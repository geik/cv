
trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:

- script: |
    pwd
    ls -aR .
    ls -aR $(Build.Repository.LocalPath)
    
  displayName: 'Show environment'

- task: Docker@0

  displayName: 'Run the vuepress image and build the website from markdown files'

  inputs:

    containerregistrytype: 'Container Registry'

    dockerRegistryConnection: 'Docker Hub Geik'

    action: 'Run an image'

    imageName: 'geik/vuepress:1.0.0'

    workingDirectory: $(Build.Repository.LocalPath)

    containerCommand: 'pwsh /build-sidebar.json.ps1 $(Build.Repository.LocalPath)/content'

    detached: false
